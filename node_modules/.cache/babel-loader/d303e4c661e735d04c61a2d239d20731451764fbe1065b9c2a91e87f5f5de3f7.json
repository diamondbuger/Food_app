{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { apiCalls } from '../services/api';\nexport const useCheckAuth = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useContext(AuthContext);\n  useEffect(() => {\n    const verifyToken = async () => {\n      // If user is logged in, verify token with backend\n      if (user) {\n        try {\n          await apiCalls.verifyToken();\n        } catch (err) {\n          // Token is invalid or cookie was deleted\n          logout();\n        }\n      }\n    };\n\n    // Check token validity when component mounts\n    verifyToken();\n\n    // Check every 30 seconds\n    const interval = setInterval(verifyToken, 30000);\n    return () => clearInterval(interval);\n  }, [user, logout]);\n};\n_s(useCheckAuth, \"5hAIGgbulSQXWttK2KFjkaT8gGI=\");","map":{"version":3,"names":["useEffect","useContext","AuthContext","apiCalls","useCheckAuth","_s","user","logout","verifyToken","err","interval","setInterval","clearInterval"],"sources":["C:/Users/mitta/.vscode/MERN-FoodApp/src/hooks/useCheckAuth.js"],"sourcesContent":["import { useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { apiCalls } from '../services/api';\r\n\r\nexport const useCheckAuth = () => {\r\n  const { user, logout } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    const verifyToken = async () => {\r\n      // If user is logged in, verify token with backend\r\n      if (user) {\r\n        try {\r\n          await apiCalls.verifyToken();\r\n        } catch (err) {\r\n          // Token is invalid or cookie was deleted\r\n          logout();\r\n        }\r\n      }\r\n    };\r\n\r\n    // Check token validity when component mounts\r\n    verifyToken();\r\n\r\n    // Check every 30 seconds\r\n    const interval = setInterval(verifyToken, 30000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [user, logout]);\r\n};\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC7C,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,QAAQ,QAAQ,iBAAiB;AAE1C,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAM;IAAEC,IAAI;IAAEC;EAAO,CAAC,GAAGN,UAAU,CAACC,WAAW,CAAC;EAEhDF,SAAS,CAAC,MAAM;IACd,MAAMQ,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B;MACA,IAAIF,IAAI,EAAE;QACR,IAAI;UACF,MAAMH,QAAQ,CAACK,WAAW,CAAC,CAAC;QAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;UACZ;UACAF,MAAM,CAAC,CAAC;QACV;MACF;IACF,CAAC;;IAED;IACAC,WAAW,CAAC,CAAC;;IAEb;IACA,MAAME,QAAQ,GAAGC,WAAW,CAACH,WAAW,EAAE,KAAK,CAAC;IAEhD,OAAO,MAAMI,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,CAACJ,IAAI,EAAEC,MAAM,CAAC,CAAC;AACpB,CAAC;AAACF,EAAA,CAxBWD,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}